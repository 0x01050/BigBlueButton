<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" title="Presentation" xmlns:mate="http://mate.asfusion.com/">

	<mate:Listener type="{PresentationEvent.SHARE_PRESENTATION}" method="handleSharePresentation" />
	<mate:Listener type="{PresentationEvent.UPDATE_SLIDE}" method="handleUpdateSlide" />

	<mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			
			import org.bigbluebutton.presentation.events.PresentationEvent;
			
			private var presentationName:String;
			private var pageNum:Number;
			
			private function handleSharePresentation(e:PresentationEvent):void{
				presentationName = e.presentationName;
			}
			
			private function handleUpdateSlide(e:PresentationEvent):void{
				pageNum = e.pageNum;

				//TODO: pageNum begins in 0. it should be from 1
				slide.source = presentationName + "/" + "slide-" + (pageNum+1) + ".swf" //For local testing. For remote files, just replace with http url
			}
		]]>
	</mx:Script>
	
	<!-- Image inherits from SWFLoader, so it's useful for both deployment and testing with regular images such as .png -->
	<mx:Image id="slide" width="100%" height="100%" />
	
</mx:Panel>